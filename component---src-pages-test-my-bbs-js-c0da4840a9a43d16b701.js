(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{us2A:function(t,e,s){"use strict";function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}s.r(e);var c=s("9Hrx"),n=s("q1tI"),a=s.n(n),i=s("FwpG"),u=s("izhR"),b=s("kCIJ"),r=s("qKvR"),o={name:"xdees7",styles:"overflow:scroll;"},d=function(t){function e(e){var s;return(s=t.call(this,e)||this).state={url:"",warn:"",apiResult:"",apiJSON:null,response:null,ok:!1,code:200,isLoading:!1},s.handleURLChange=s.handleURLChange.bind(l(s)),s.giveURLSuggestion=s.giveURLSuggestion.bind(l(s)),s.sendAjaxRequest=s.sendAjaxRequest.bind(l(s)),s.setCodeResult=s.setCodeResult.bind(l(s)),s.setResponseResult=s.setResponseResult.bind(l(s)),s}Object(c.a)(e,t);var s=e.prototype;return s.handleURLChange=function(t){this.setState({url:t.target.value}),this.giveURLSuggestion()},s.checkURL=function(t){var e=t;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(e)},s.getFullApiUrl=function(t){return t+"/api/mobile/index.php?version=4&module=check"},s.setCodeResult=function(t,e){this.setState({apiResult:t,apiJSON:e})},s.clearResult=function(){this.setState({apiResult:null,apiJSON:null})},s.setResponseResult=function(t,e){this.setState({response:e,ok:t})},s.sendAjaxRequest=function(){var t=this;this.props.intl;this.clearResult();var e=this.getFullApiUrl(this.state.url);this.state.isLoading=!0,fetch("https://cors-anywhere.herokuapp.com/"+e,{method:"GET",credentials:"same-origin","X-Requested-With":"XMLHttpRequest"}).then((function(e){return t.setState({ok:e.ok,code:e.status,isLoading:!1}),console.log(e),e.text()})).then((function(e){t.setCodeResult(e,null);var s=JSON.parse(e);console.log(e),console.log(s),t.setCodeResult(e,s),t.setState({ok:!0})})).catch((function(t){console.log(t)}))},s.checkBBSResultOk=function(){return null!=this.state.apiJSON&&null!=this.state.apiJSON.sitename},s.setURL=function(t){this.setState({url:t})},s.giveURLSuggestion=function(){var t=this.props.intl,e=this.state.url;e.startsWith("http://")||e.startsWith("https://")?this.checkURL(e)?this.setState({warn:""}):this.setState({warn:t.formatMessage({id:"test-my-bbs.warn_enter_to_check_problem"})}):this.setState({warn:t.formatMessage({id:"test-my-bbs.warn_need_protocol"})})},s.componentDidMount=function(){},s.render=function(){var t=this,e=this.props.intl,s=this.state.url,l=this.state;return Object(r.c)(i.a,{subject:e.formatMessage({id:"test-my-bbs.title"})},Object(r.c)(u.j,null,Object(r.c)(u.d,null,Object(r.c)(u.n,{htmlFor:"bbs_url"},e.formatMessage({id:"test-my-bbs.url"})),Object(r.c)(u.m,{name:"bbs_url",mb:3,type:"url",onChange:this.handleURLChange,value:s}),Object(r.c)("p",null,Object(r.c)("small",null,"*:",e.formatMessage({id:"test-my-bbs.redirect_by_cross_anywhere"}))),Object(r.c)("p",null,e.formatMessage({id:"test-my-bbs.example"})),Object(r.c)("ul",null,Object(r.c)("li",null,Object(r.c)(u.o,{href:"#",onClick:function(e){return t.setURL("https://www.mcbbs.net")}},"https://www.mcbbs.net")),Object(r.c)("li",null,Object(r.c)(u.o,{href:"#",onClick:function(e){return t.setURL("https://keylol.com")}},"https://keylol.com"))),this.checkURL(s)&&Object(r.c)("p",{sx:{m:0,color:"primary"}},e.formatMessage({id:"test-my-bbs.api_full_text"},{fullApi:""}),Object(r.c)(u.o,{href:this.getFullApiUrl(s)},this.getFullApiUrl(s))),this.checkURL(s)&&Object(r.c)(u.e,{variant:"success",onClick:this.sendAjaxRequest,sx:{mt:2,bg:"blue"}},e.formatMessage({id:"test-my-bbs.submit"})))),Object(r.c)(u.j,{columns:1,mt:2},Object(r.c)("box",null,l.isLoading&&Object(r.c)("p",null,Object(r.c)(u.r,null),e.formatMessage({id:"test-my-bbs.loading_data"},{url:s}))),this.state.apiResult&&Object(r.c)("box",null,this.checkBBSResultOk()?Object(r.c)(u.a,{variant:"secondary",mb:2,sx:{bg:"green"}},e.formatMessage({id:"test-my-bbs.app_add_guide"},{url:s,name:l.apiJSON.sitename})):Object(r.c)(u.a,{variant:"secondary",mb:2},e.formatMessage({id:"test-my-bbs.bbs_not_pass_result"})))),Object(r.c)(u.j,{columns:[1,2,2],sx:{mt:4,mb:4}},this.state.apiResult&&Object(r.c)(u.d,null,Object(r.c)("h3",null,e.formatMessage({id:"test-my-bbs.raw_result"})),Object(r.c)("pre",{css:o},this.state.apiResult)),this.state.apiJSON&&Object(r.c)(u.d,null,Object(r.c)("h3",null,e.formatMessage({id:"test-my-bbs.attributes"})),Object(r.c)("table",null,Object(r.c)("thead",null,Object(r.c)("tr",{sx:{bg:"primary"}},Object(r.c)("th",null,e.formatMessage({id:"test-my-bbs.key"})),Object(r.c)("th",null,e.formatMessage({id:"test-my-bbs.value"})),Object(r.c)("th",null,e.formatMessage({id:"test-my-bbs.compatible"})))),Object(r.c)("tbody",null,Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.discuz_version"})),Object(r.c)("td",null,this.state.apiJSON.discuzversion),Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.yes"}))),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.charset"})),Object(r.c)("td",null,this.state.apiJSON.charset),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.plugin_version"})),Object(r.c)("td",null,this.state.apiJSON.pluginversion),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.register_name"})),Object(r.c)("td",null,this.state.apiJSON.regname),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.qq_connect"})),Object(r.c)("td",null,this.state.apiJSON.qqconnect),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.hide_register"})),Object(r.c)("td",null,this.state.apiJSON.wsqhideregister),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.site_name"})),Object(r.c)("td",null,this.state.apiJSON.sitename),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.site_id"})),Object(r.c)("td",null,this.state.apiJSON.mysiteid),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.ucenter_url"})),Object(r.c)("td",null,this.state.apiJSON.ucenterurl),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.default_fid"})),Object(r.c)("td",null,this.state.apiJSON.defaultfid),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.total_post"})),Object(r.c)("td",null,this.state.apiJSON.totalposts),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.total_members"})),Object(r.c)("td",null,this.state.apiJSON.totalmembers),Object(r.c)("td",null,"/")),Object(r.c)("tr",null,Object(r.c)("td",null,e.formatMessage({id:"test-my-bbs.test_cookie"})),Object(r.c)("td",null,this.state.apiJSON.testcookie),Object(r.c)("td",null,"/")))))))},e}(a.a.Component);e.default=Object(b.injectIntl)(d)}}]);
//# sourceMappingURL=component---src-pages-test-my-bbs-js-c0da4840a9a43d16b701.js.map