{"version":3,"file":"component---src-pages-test-my-bbs-js-ba1fc8e979f9b2371a4c.js","mappings":"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","sources":["webpack://gatsby-starter-hello-world/./src/pages/test-my-bbs.js"],"sourcesContent":["import React from \"react\"\nimport DocLayout from \"../components/doc-layout\"\nimport { Box, Grid, Link, Alert, Input, Label, Button, Spinner } from 'theme-ui'\nimport { injectIntl } from \"gatsby-plugin-intl\"\n\n\n\nclass TestPage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            url: \"\",\n            warn: \"\",\n            apiResult: \"\",\n            apiJSON: null,\n            response: null,\n            ok: false,\n            code: 200,\n            isLoading: false\n        }\n        this.handleURLChange = this.handleURLChange.bind(this)\n        this.giveURLSuggestion = this.giveURLSuggestion.bind(this)\n        this.sendAjaxRequest = this.sendAjaxRequest.bind(this)\n        this.setCodeResult = this.setCodeResult.bind(this)\n        this.setResponseResult = this.setResponseResult.bind(this)\n\n    }\n\n\n    handleURLChange(event) {\n        this.setState({\n            url: event.target.value\n        })\n        this.giveURLSuggestion()\n    }\n\n    checkURL(URL) {\n        var str = URL;\n        //判断URL地址的正则表达式为:http(s)?://([\\w-]+\\.)+[\\w-]+(/[\\w- ./?%&=]*)?\n        //下面的代码中应用了转义字符\"\\\"输出一个字符\"/\"\n        var Expression = /http(s)?:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- .\\/?%&=]*)?/;\n        var objExp = new RegExp(Expression);\n        if (objExp.test(str) == true) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    getFullApiUrl(header) {\n        return header + \"/api/mobile/index.php?version=4&module=check\";\n    }\n\n    setCodeResult(response, json) {\n        this.setState({\n            \"apiResult\": response,\n            \"apiJSON\": json\n        })\n    }\n\n    clearResult(){\n        this.setState({\n            \"apiResult\":null,\n            \"apiJSON\":null\n        })\n    }\n\n    setResponseResult(ok, response) {\n        this.setState({\n            \"response\": response,\n            \"ok\": ok\n\n        })\n    }\n\n    sendAjaxRequest() {\n        const { intl } = this.props;\n        this.clearResult()\n        \n        const url = this.getFullApiUrl(this.state.url);\n        \n\n\n        var proxyUrl = 'https://cors-anywhere.herokuapp.com/'\n        this.state.isLoading = true\n        fetch(proxyUrl + url, {\n            method: 'GET',\n            credentials: 'same-origin',\n            'X-Requested-With': 'XMLHttpRequest'\n\n        }).then(response => {\n            //setResponseResult(true,response)\n            this.setState({\n                \"ok\":response.ok,\n                \"code\":response.status,\n                \"isLoading\":false\n            })\n            console.log(response);\n            //this.setResponseResult(response.ok,response)\n            return response.text()\n\n        }).then(text => {\n            this.setCodeResult(text, null)\n            var json = JSON.parse(text)\n            console.log(text)\n            console.log(json)\n            this.setCodeResult(text, json)\n            this.setState({\n                ok: true\n            })\n        })\n            .catch(function (error) {\n                console.log(error)\n                \n            })\n    }\n\n    checkBBSResultOk(){\n        if(this.state.apiJSON!=null && this.state.apiJSON.sitename!=null){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n\n    setURL(urlString){\n        //this.url = urlString\n        this.setState({\n            url:urlString\n        })\n    }\n\n\n    giveURLSuggestion() {\n        const { intl } = this.props;\n        const url = this.state.url;\n        if (url.startsWith(\"http://\") || url.startsWith(\"https://\")) {\n            // ok with protocol\n            if (this.checkURL(url)) {\n                this.setState({\n                    warn: \"\"\n                })\n            }\n            else {\n                this.setState({\n                    warn: intl.formatMessage({ id: \"test-my-bbs.warn_enter_to_check_problem\" })\n                })\n            }\n        }\n        else {\n            this.setState({\n                warn: intl.formatMessage({ id: \"test-my-bbs.warn_need_protocol\" })\n            })\n        }\n    }\n\n    componentDidMount() {\n\n    }\n\n    render() {\n        const { intl } = this.props;\n        var url = this.state.url;\n        var state = this.state;\n        return (\n            <DocLayout subject={intl.formatMessage({ id: \"test-my-bbs.title\" })}>\n                <Grid sx={{\n                    textAlign:'center',\n                    mt: 32,\n                    mb: 32\n                }}>\n                    <h1>{intl.formatMessage({ id: \"test-my-bbs.redirect_to_dhpush_title\" })}</h1>\n                    <h3><a href=\"https://dhp.kidozh.com/check-compatibility\">{intl.formatMessage({ id: \"test-my-bbs.redirect_to_dhpush_name\" })}</a></h3>\n                </Grid>\n            </DocLayout>\n        )\n    }\n\n}\n\n\n\nexport default injectIntl(TestPage)"],"names":["TestPage","props","state","url","warn","apiResult","apiJSON","response","ok","code","isLoading","handleURLChange","bind","giveURLSuggestion","sendAjaxRequest","setCodeResult","setResponseResult","event","this","setState","target","value","checkURL","URL","str","RegExp","test","getFullApiUrl","header","json","clearResult","intl","fetch","method","credentials","then","status","console","log","text","JSON","parse","catch","error","checkBBSResultOk","sitename","setURL","urlString","startsWith","formatMessage","id","componentDidMount","render","subject","sx","textAlign","mt","mb","href","React","injectIntl"],"sourceRoot":""}