"use strict";(self.webpackChunkgatsby_starter_hello_world=self.webpackChunkgatsby_starter_hello_world||[]).push([[767],{8344:function(e,t,l){l.r(t);var s=l(7326),n=l(4578),a=l(7294),r=l(8190),i=l(795),m=l(4058);let u=function(e){function t(t){var l;return(l=e.call(this,t)||this).state={url:"",warn:"",apiResult:"",apiJSON:null,response:null,ok:!1,code:200,isLoading:!1},l.handleURLChange=l.handleURLChange.bind((0,s.Z)(l)),l.giveURLSuggestion=l.giveURLSuggestion.bind((0,s.Z)(l)),l.sendAjaxRequest=l.sendAjaxRequest.bind((0,s.Z)(l)),l.setCodeResult=l.setCodeResult.bind((0,s.Z)(l)),l.setResponseResult=l.setResponseResult.bind((0,s.Z)(l)),l}(0,n.Z)(t,e);var l=t.prototype;return l.handleURLChange=function(e){this.setState({url:e.target.value}),this.giveURLSuggestion()},l.checkURL=function(e){var t=e;return 1==new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(t)},l.getFullApiUrl=function(e){return e+"/api/mobile/index.php?version=4&module=check"},l.setCodeResult=function(e,t){this.setState({apiResult:e,apiJSON:t})},l.clearResult=function(){this.setState({apiResult:null,apiJSON:null})},l.setResponseResult=function(e,t){this.setState({response:t,ok:e})},l.sendAjaxRequest=function(){const{intl:e}=this.props;this.clearResult();const t=this.getFullApiUrl(this.state.url);this.state.isLoading=!0,fetch("https://cors-anywhere.herokuapp.com/"+t,{method:"GET",credentials:"same-origin","X-Requested-With":"XMLHttpRequest"}).then((e=>(this.setState({ok:e.ok,code:e.status,isLoading:!1}),console.log(e),e.text()))).then((e=>{this.setCodeResult(e,null);var t=JSON.parse(e);console.log(e),console.log(t),this.setCodeResult(e,t),this.setState({ok:!0})})).catch((function(e){console.log(e)}))},l.checkBBSResultOk=function(){return null!=this.state.apiJSON&&null!=this.state.apiJSON.sitename},l.setURL=function(e){this.setState({url:e})},l.giveURLSuggestion=function(){const{intl:e}=this.props,t=this.state.url;t.startsWith("http://")||t.startsWith("https://")?this.checkURL(t)?this.setState({warn:""}):this.setState({warn:e.formatMessage({id:"test-my-bbs.warn_enter_to_check_problem"})}):this.setState({warn:e.formatMessage({id:"test-my-bbs.warn_need_protocol"})})},l.componentDidMount=function(){},l.render=function(){const{intl:e}=this.props;var t=this.state.url,l=this.state;return a.createElement(r.Z,{subject:e.formatMessage({id:"test-my-bbs.title"})},a.createElement(i.rj,null,a.createElement(i.xu,null,a.createElement(i.__,{htmlFor:"bbs_url"},e.formatMessage({id:"test-my-bbs.url"})),a.createElement(i.II,{name:"bbs_url",mb:3,type:"url",onChange:this.handleURLChange,value:t}),a.createElement("p",null,a.createElement("small",null,"*:",e.formatMessage({id:"test-my-bbs.redirect_by_cross_anywhere"}))),a.createElement("p",null,e.formatMessage({id:"test-my-bbs.example"})),a.createElement("ul",null,a.createElement("li",null,a.createElement(i.rU,{href:"#",onClick:e=>this.setURL("https://www.mcbbs.net")},"https://www.mcbbs.net")),a.createElement("li",null,a.createElement(i.rU,{href:"#",onClick:e=>this.setURL("https://keylol.com")},"https://keylol.com"))),this.checkURL(t)&&a.createElement("p",{sx:{m:0,color:"primary"}},e.formatMessage({id:"test-my-bbs.api_full_text"},{fullApi:""}),a.createElement(i.rU,{href:this.getFullApiUrl(t)},this.getFullApiUrl(t))),this.checkURL(t)&&a.createElement(i.zx,{variant:"success",onClick:this.sendAjaxRequest,sx:{mt:2,bg:"blue"}},e.formatMessage({id:"test-my-bbs.submit"})))),a.createElement(i.rj,{columns:1,mt:2},a.createElement("box",null,l.isLoading&&a.createElement("p",null,a.createElement(i.$j,null),e.formatMessage({id:"test-my-bbs.loading_data"},{url:t}))),this.state.apiResult&&a.createElement("box",null,this.checkBBSResultOk()?a.createElement(i.bZ,{variant:"secondary",mb:2,sx:{bg:"green"}},e.formatMessage({id:"test-my-bbs.app_add_guide"},{url:t,name:l.apiJSON.sitename})):a.createElement(i.bZ,{variant:"secondary",mb:2},e.formatMessage({id:"test-my-bbs.bbs_not_pass_result"})))),a.createElement(i.rj,{columns:[1,2,2],sx:{mt:4,mb:4}},this.state.apiResult&&a.createElement(i.xu,null,a.createElement("h3",null,e.formatMessage({id:"test-my-bbs.raw_result"})),a.createElement("pre",{css:{overflow:"scroll"}},this.state.apiResult)),this.state.apiJSON&&a.createElement(i.xu,null,a.createElement("h3",null,e.formatMessage({id:"test-my-bbs.attributes"})),a.createElement("table",null,a.createElement("thead",null,a.createElement("tr",{sx:{bg:"primary"}},a.createElement("th",null,e.formatMessage({id:"test-my-bbs.key"})),a.createElement("th",null,e.formatMessage({id:"test-my-bbs.value"})),a.createElement("th",null,e.formatMessage({id:"test-my-bbs.compatible"})))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.discuz_version"})),a.createElement("td",null,this.state.apiJSON.discuzversion),a.createElement("td",null,e.formatMessage({id:"test-my-bbs.yes"}))),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.charset"})),a.createElement("td",null,this.state.apiJSON.charset),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.plugin_version"})),a.createElement("td",null,this.state.apiJSON.pluginversion),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.register_name"})),a.createElement("td",null,this.state.apiJSON.regname),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.qq_connect"})),a.createElement("td",null,this.state.apiJSON.qqconnect),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.hide_register"})),a.createElement("td",null,this.state.apiJSON.wsqhideregister),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.site_name"})),a.createElement("td",null,this.state.apiJSON.sitename),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.site_id"})),a.createElement("td",null,this.state.apiJSON.mysiteid),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.ucenter_url"})),a.createElement("td",null,this.state.apiJSON.ucenterurl),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.default_fid"})),a.createElement("td",null,this.state.apiJSON.defaultfid),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.total_post"})),a.createElement("td",null,this.state.apiJSON.totalposts),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.total_members"})),a.createElement("td",null,this.state.apiJSON.totalmembers),a.createElement("td",null,"/")),a.createElement("tr",null,a.createElement("td",null,e.formatMessage({id:"test-my-bbs.test_cookie"})),a.createElement("td",null,this.state.apiJSON.testcookie),a.createElement("td",null,"/")))))))},t}(a.Component);t.default=(0,m.injectIntl)(u)}}]);
//# sourceMappingURL=component---src-pages-test-my-bbs-js-af70b4069d67826f8bbf.js.map